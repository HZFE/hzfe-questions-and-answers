(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{220:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("如果最末尾是1，那么这个数据类型就只是1个比特长度的。")]),t._v(" "),a("p",[t._v("如果最末尾是0，那么这个数据类型长度都是占3个比特的，这种情况的有4种数据类型。")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("有两种值比较特殊：")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._m(12),t._m(13),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[a("a",{attrs:{href:"https://zui.su/typeof_null/",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么\"typeof null\"是'object'"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"http://2ality.com/2013/10/typeof-null.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("The history of “typeof null”"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN - typeof"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[this._v("# 此页面贡献者：年轻的小铲、树")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#null","aria-hidden":"true"}},[this._v("#")]),this._v(" null")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The Null type has exactly one value, called null.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"为什么-typeof-null-是-object"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么-typeof-null-是-object","aria-hidden":"true"}},[this._v("#")]),this._v(" 为什么 typeof null 是 'object'")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("高程 - [数据类型]")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v('有些时候，typeof 操作符会返回一些令人迷惑但技术上却正确的值。\n比如，调用 typeof null 会返回 "object" ，因为特殊值 null 被认为是一个空的对象引用。')])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("在 "),a("code",[t._v("JavaScript")]),t._v(" 中，"),a("code",[t._v("null")]),t._v(" 是原始值之一，但是 "),a("code",[t._v("typeof null")]),t._v(" 的输出却又是 "),a("code",[t._v("'object'")]),t._v(" 。很不幸的是，这个bug几乎不可能被修复，因为修复它会破坏现有的代码。 "),a("code",[t._v("typeof null")]),t._v(" 是从 "),a("code",[t._v("JavaScript")]),t._v(" 第一版就遗留下来的问题，在这个版本中，数据用 "),a("code",[t._v("32位")]),t._v(" 来存储：数据的 "),a("code",[t._v("类型 tag")]),t._v(" 记录在其末尾中的1~3个比特中，剩余的比特位来存储数据的值。数据的类型有五种。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("000")]),t._v(" "),a("td",[t._v("表示对象，存储的值是一个对象的引用")])]),t._v(" "),a("tr",[a("td",[t._v("1")]),t._v(" "),a("td",[t._v("表示整数，存储的值是31位的有符号整数")])]),t._v(" "),a("tr",[a("td",[t._v("010")]),t._v(" "),a("td",[t._v("表示双精度浮点数，存储的值是这个数字的引用")])]),t._v(" "),a("tr",[a("td",[t._v("100")]),t._v(" "),a("td",[t._v("表示字符串，存储的值是这个字符串的引用")])]),t._v(" "),a("tr",[a("td",[t._v("110")]),t._v(" "),a("td",[t._v("布尔值，存储的值是一个布尔值")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("code",[this._v("undefined")]),this._v(" (JSVAL_VOID) 是一个超出了最大能表示的整数的数 (-2^30)")]),this._v(" "),s("li",[s("code",[this._v("null")]),this._v(" (JSVAL_NULL) 代表的是 "),s("code",[this._v("空指针")]),this._v(" (大多数平台下值为0x00)，而十六进制的0x00转换为二进制以后，就是整整32个0比特。因此，null的类型标签也是0")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("现在知道为什么 "),a("code",[t._v("typeof null")]),t._v(" 会被识别成对象了：当 "),a("code",[t._v("typeof")]),t._v(" 检查 "),a("code",[t._v("null")]),t._v(" 的 "),a("code",[t._v("类型tag")]),t._v(" 时，首先发现其末尾是一个0，进而检查倒数第二和第三个比特位，发现也都是0，于是 "),a("code",[t._v("typeof")]),t._v(" 就认为 "),a("code",[t._v("null")]),t._v(" 是一个对象了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"spidermonkey-源码分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spidermonkey-源码分析","aria-hidden":"true"}},[this._v("#")]),this._v(" SpiderMonkey 源码分析")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//jstypes.h")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JS_BIT(n)       ((JSUint32)1 << (n))")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JS_BITMASK(n)   (JS_BIT(n) - 1)")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// jsapi.h")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_OBJECT            0x0     ")]),a("span",{attrs:{class:"token comment"}},[t._v("/* untagged reference to object */")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_TAGBITS           3")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_TAGMASK           JS_BITMASK(JSVAL_TAGBITS) ")]),a("span",{attrs:{class:"token comment"}},[t._v("// ((JSUint32)1 << (3)) - 1")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_TAG(v)            ((v) & JSVAL_TAGMASK)")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_IS_OBJECT(v)      (JSVAL_TAG(v) == JSVAL_OBJECT)")]),t._v("\n\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" OBJECT_TO_JSVAL(obj)    ((jsval)(obj))")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" JSVAL_NULL              OBJECT_TO_JSVAL(0)")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// jsapi.c")]),t._v("\n"),a("span",{attrs:{class:"token constant"}},[t._v("JS_PUBLIC_API")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSType"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("JS_TypeOfValue")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSContext "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsval v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    JSType type"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    JSObject "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    JSObjectOps "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("ops"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    JSClass "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("clasp"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token constant"}},[t._v("CHECK_REQUEST")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("JSVAL_IS_OBJECT")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_OBJECT")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("           "),a("span",{attrs:{class:"token comment"}},[t._v("/* XXXbe JSTYPE_NULL for JS2 */")]),t._v("\n        obj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSVAL_TO_OBJECT")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            ops "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("map"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("ops"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n#"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JS_HAS_XML_SUPPORT")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ops "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("js_XMLObjectOps"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_XML")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n#endif\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token comment"}},[t._v('/*\n                 * ECMA 262, 11.4.3 says that any native object that implements\n                 * [[Call]] should be of type "function". Note that RegExp and\n                 * Script are both of type "function" for compatibility with\n                 * older SpiderMonkeys.\n                 */')]),t._v("\n                clasp "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("OBJ_GET_CLASS")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ops "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("js_ObjectOps"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clasp"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("call\n                       "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clasp "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("js_RegExpClass "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" clasp "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("js_ScriptClass"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                       "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" clasp "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("js_FunctionClass"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ops"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("call "),a("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("NULL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_FUNCTION")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#ifdef "),a("span",{attrs:{class:"token constant"}},[t._v("NARCISSUS")]),t._v("\n                    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),a("span",{attrs:{class:"token constant"}},[t._v("OBJ_GET_PROPERTY")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          "),a("span",{attrs:{class:"token constant"}},[t._v("ATOM_TO_JSID")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("runtime"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("atomState\n                                                       "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callAtom"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{attrs:{class:"token function"}},[t._v("JS_ClearPendingException")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("VALUE_IS_FUNCTION")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_FUNCTION")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n#endif\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("JSVAL_IS_NUMBER")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_NUMBER")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("JSVAL_IS_STRING")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_STRING")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("JSVAL_IS_BOOLEAN")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_BOOLEAN")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSTYPE_VOID")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" type"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("从上面的源码我们可以知道，判断值是否为 "),a("code",[t._v("Object")]),t._v(" 用到的函数是 "),a("code",[t._v("JSVAL_IS_OBJECT(v)")]),t._v("，而 "),a("code",[t._v("JSVAL_IS_OBJECT(v)")]),t._v(" 的宏定义可以在 "),a("code",[t._v("jsapi.h")]),t._v(" 中找到，"),a("code",[t._v("JSVAL_IS_OBJECT(v)")]),t._v(" 实际上是等于 "),a("code",[t._v("JSVAL_TAG(v) == JSVAL_OBJECT")]),t._v(" 的，一步步向上查找，最终我们可以发现\n"),a("code",[t._v("JSVAL_IS_OBJECT(null)")]),t._v(" 实际上执行的操作是 "),a("strong",[a("code",[t._v("(null & ((JSUint32)1 << (3)) - 1) == 0x0")])]),t._v("，而null的值为 0，显然左右这两个值是相等的，那么当然 typeof null 就等于 Object 了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"学习资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学习资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 学习资料")])}],!1,null,null,null);s.default=e.exports}}]);
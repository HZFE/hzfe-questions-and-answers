<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HZFE奶库</title>
    <meta name="description" content="前端面试知识题库">
    <link rel="icon" href="/hzfe-questions-and-answers/favicon.ico">
  <link rel="manifest" href="/hzfe-questions-and-answers/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/hzfe-questions-and-answers/icons/apple-touch-icon-152x152.png">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/hzfe-questions-and-answers/assets/css/0.styles.9ba17c25.css" as="style"><link rel="preload" href="/hzfe-questions-and-answers/assets/js/app.eb41323a.js" as="script"><link rel="preload" href="/hzfe-questions-and-answers/assets/js/25.7d76789b.js" as="script"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/2.7986b4a9.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/3.e950d149.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/4.b5949d4d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/5.2fc0d2c1.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/6.7432443c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/7.9b5853b0.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/8.316fbaf4.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/9.74bb88b1.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/10.5de83f28.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/11.8deba7f9.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/12.39ad446b.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/13.d2711604.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/14.02dd171f.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/15.d71496e0.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/16.8151aae1.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/17.69fef4d9.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/18.a5500a55.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/19.3a1da01d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/20.e93121ef.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/21.19728409.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/22.a10836f8.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/23.e0b3d90d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/24.2643ea67.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/26.aa798614.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/27.42a5d8de.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/28.f082800c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/29.85cc3598.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/30.64944d3a.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/31.7285675c.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/32.2811d635.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/33.9bf63bc7.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/34.506092b9.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/35.d5a511a6.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/36.0b902e6a.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/37.ab5e1506.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/38.e9dcf174.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/39.e3f75d53.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/40.5c8a350d.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/41.4784cde3.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/42.7da86d89.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/43.7bdb8290.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/44.1f273bab.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/45.e8f7b16a.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/46.82e025a1.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/47.e7a79f45.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/48.85faab21.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/49.4c544bfe.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/50.c182bac4.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/51.bf46f798.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/52.4f475fa6.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/53.8933b453.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/54.dc1520ca.js"><link rel="prefetch" href="/hzfe-questions-and-answers/assets/js/55.8cdc9530.js">
    <link rel="stylesheet" href="/hzfe-questions-and-answers/assets/css/0.styles.9ba17c25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hzfe-questions-and-answers/" class="home-link router-link-active"><!----> <span class="site-name">HZFE奶库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hzfe-questions-and-answers/toc.html" class="nav-link">目录</a></div><div class="nav-item"><a href="https://hzfe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HZFE
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HZFE/hzfe-questions-and-answers" target="_blank" rel="noopener noreferrer" class="repo-link">
    GITHUB
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hzfe-questions-and-answers/toc.html" class="nav-link">目录</a></div><div class="nav-item"><a href="https://hzfe.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  HZFE
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/HZFE/hzfe-questions-and-answers" target="_blank" rel="noopener noreferrer" class="repo-link">
    GITHUB
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-group-items"><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/C-javascript/types/why-null-is-an-object.html#null" class="sidebar-link">null</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/C-javascript/types/why-null-is-an-object.html#为什么-typeof-null-是-object" class="sidebar-link">为什么 typeof null 是 'object'</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/C-javascript/types/why-null-is-an-object.html#spidermonkey-源码分析" class="sidebar-link">SpiderMonkey 源码分析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hzfe-questions-and-answers/hzfe-qa-2017/C-javascript/types/why-null-is-an-object.html#学习资料" class="sidebar-link">学习资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 此页面贡献者：年轻的小铲、树</span>
</code></pre></div><h2 id="null"><a href="#null" aria-hidden="true" class="header-anchor">#</a> null</h2> <blockquote><p>The Null type has exactly one value, called null.</p></blockquote> <h2 id="为什么-typeof-null-是-object"><a href="#为什么-typeof-null-是-object" aria-hidden="true" class="header-anchor">#</a> 为什么 typeof null 是 'object'</h2> <p><strong>高程 - [数据类型]</strong></p> <blockquote><p>有些时候，typeof 操作符会返回一些令人迷惑但技术上却正确的值。
比如，调用 typeof null 会返回 &quot;object&quot; ，因为特殊值 null 被认为是一个空的对象引用。</p></blockquote> <p>在 <code>JavaScript</code> 中，<code>null</code> 是原始值之一，但是 <code>typeof null</code> 的输出却又是 <code>'object'</code> 。很不幸的是，这个bug几乎不可能被修复，因为修复它会破坏现有的代码。 <code>typeof null</code> 是从 <code>JavaScript</code> 第一版就遗留下来的问题，在这个版本中，数据用 <code>32位</code> 来存储：数据的 <code>类型 tag</code> 记录在其末尾中的1~3个比特中，剩余的比特位来存储数据的值。数据的类型有五种。</p> <p>如果最末尾是1，那么这个数据类型就只是1个比特长度的。</p> <p>如果最末尾是0，那么这个数据类型长度都是占3个比特的，这种情况的有4种数据类型。</p> <table><thead><tr><th>类型</th> <th>含义</th></tr></thead> <tbody><tr><td>000</td> <td>表示对象，存储的值是一个对象的引用</td></tr> <tr><td>1</td> <td>表示整数，存储的值是31位的有符号整数</td></tr> <tr><td>010</td> <td>表示双精度浮点数，存储的值是这个数字的引用</td></tr> <tr><td>100</td> <td>表示字符串，存储的值是这个字符串的引用</td></tr> <tr><td>110</td> <td>布尔值，存储的值是一个布尔值</td></tr></tbody></table> <p>有两种值比较特殊：</p> <ol><li><code>undefined</code> (JSVAL_VOID) 是一个超出了最大能表示的整数的数 (-2^30)</li> <li><code>null</code> (JSVAL_NULL) 代表的是 <code>空指针</code> (大多数平台下值为0x00)，而十六进制的0x00转换为二进制以后，就是整整32个0比特。因此，null的类型标签也是0</li></ol> <p>现在知道为什么 <code>typeof null</code> 会被识别成对象了：当 <code>typeof</code> 检查 <code>null</code> 的 <code>类型tag</code> 时，首先发现其末尾是一个0，进而检查倒数第二和第三个比特位，发现也都是0，于是 <code>typeof</code> 就认为 <code>null</code> 是一个对象了。</p> <h2 id="spidermonkey-源码分析"><a href="#spidermonkey-源码分析" aria-hidden="true" class="header-anchor">#</a> SpiderMonkey 源码分析</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">//jstypes.h</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JS_BIT(n)       ((JSUint32)1 &lt;&lt; (n))</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JS_BITMASK(n)   (JS_BIT(n) - 1)</span>
</code></pre></div><div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// jsapi.h</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_OBJECT            0x0     </span><span class="token comment">/* untagged reference to object */</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_TAGBITS           3</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_TAGMASK           JS_BITMASK(JSVAL_TAGBITS) </span><span class="token comment">// ((JSUint32)1 &lt;&lt; (3)) - 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_TAG(v)            ((v) &amp; JSVAL_TAGMASK)</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_IS_OBJECT(v)      (JSVAL_TAG(v) == JSVAL_OBJECT)</span>

<span class="token macro property">#<span class="token directive keyword">define</span> OBJECT_TO_JSVAL(obj)    ((jsval)(obj))</span>
<span class="token macro property">#<span class="token directive keyword">define</span> JSVAL_NULL              OBJECT_TO_JSVAL(0)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// jsapi.c</span>
<span class="token constant">JS_PUBLIC_API</span><span class="token punctuation">(</span>JSType<span class="token punctuation">)</span>
<span class="token function">JS_TypeOfValue</span><span class="token punctuation">(</span>JSContext <span class="token operator">*</span>cx<span class="token punctuation">,</span> jsval v<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    JSType type<span class="token punctuation">;</span>
    JSObject <span class="token operator">*</span>obj<span class="token punctuation">;</span>
    JSObjectOps <span class="token operator">*</span>ops<span class="token punctuation">;</span>
    JSClass <span class="token operator">*</span>clasp<span class="token punctuation">;</span>

    <span class="token constant">CHECK_REQUEST</span><span class="token punctuation">(</span>cx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSVAL_IS_OBJECT</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token constant">JSTYPE_OBJECT</span><span class="token punctuation">;</span>           <span class="token comment">/* XXXbe JSTYPE_NULL for JS2 */</span>
        obj <span class="token operator">=</span> <span class="token constant">JSVAL_TO_OBJECT</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ops <span class="token operator">=</span> obj<span class="token operator">-</span><span class="token operator">&gt;</span>map<span class="token operator">-</span><span class="token operator">&gt;</span>ops<span class="token punctuation">;</span>
#<span class="token keyword">if</span> <span class="token constant">JS_HAS_XML_SUPPORT</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ops <span class="token operator">==</span> <span class="token operator">&amp;</span>js_XMLObjectOps<span class="token punctuation">.</span>base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                type <span class="token operator">=</span> <span class="token constant">JSTYPE_XML</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span>
#endif
            <span class="token punctuation">{</span>
                <span class="token comment">/*
                 * ECMA 262, 11.4.3 says that any native object that implements
                 * [[Call]] should be of type &quot;function&quot;. Note that RegExp and
                 * Script are both of type &quot;function&quot; for compatibility with
                 * older SpiderMonkeys.
                 */</span>
                clasp <span class="token operator">=</span> <span class="token constant">OBJ_GET_CLASS</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ops <span class="token operator">==</span> <span class="token operator">&amp;</span>js_ObjectOps<span class="token punctuation">)</span>
                    <span class="token operator">?</span> <span class="token punctuation">(</span>clasp<span class="token operator">-</span><span class="token operator">&gt;</span>call
                       <span class="token operator">?</span> <span class="token punctuation">(</span>clasp <span class="token operator">==</span> <span class="token operator">&amp;</span>js_RegExpClass <span class="token operator">||</span> clasp <span class="token operator">==</span> <span class="token operator">&amp;</span>js_ScriptClass<span class="token punctuation">)</span>
                       <span class="token punctuation">:</span> clasp <span class="token operator">==</span> <span class="token operator">&amp;</span>js_FunctionClass<span class="token punctuation">)</span>
                    <span class="token punctuation">:</span> ops<span class="token operator">-</span><span class="token operator">&gt;</span>call <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    type <span class="token operator">=</span> <span class="token constant">JSTYPE_FUNCTION</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
#ifdef <span class="token constant">NARCISSUS</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">OBJ_GET_PROPERTY</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> obj<span class="token punctuation">,</span>
                                          <span class="token constant">ATOM_TO_JSID</span><span class="token punctuation">(</span>cx<span class="token operator">-</span><span class="token operator">&gt;</span>runtime<span class="token operator">-</span><span class="token operator">&gt;</span>atomState
                                                       <span class="token punctuation">.</span>callAtom<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                          <span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">JS_ClearPendingException</span><span class="token punctuation">(</span>cx<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">VALUE_IS_FUNCTION</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        type <span class="token operator">=</span> <span class="token constant">JSTYPE_FUNCTION</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
#endif
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSVAL_IS_NUMBER</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token constant">JSTYPE_NUMBER</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSVAL_IS_STRING</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token constant">JSTYPE_STRING</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSVAL_IS_BOOLEAN</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token constant">JSTYPE_BOOLEAN</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token constant">JSTYPE_VOID</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从上面的源码我们可以知道，判断值是否为 <code>Object</code> 用到的函数是 <code>JSVAL_IS_OBJECT(v)</code>，而 <code>JSVAL_IS_OBJECT(v)</code> 的宏定义可以在 <code>jsapi.h</code> 中找到，<code>JSVAL_IS_OBJECT(v)</code> 实际上是等于 <code>JSVAL_TAG(v) == JSVAL_OBJECT</code> 的，一步步向上查找，最终我们可以发现
<code>JSVAL_IS_OBJECT(null)</code> 实际上执行的操作是 <strong><code>(null &amp; ((JSUint32)1 &lt;&lt; (3)) - 1) == 0x0</code></strong>，而null的值为 0，显然左右这两个值是相等的，那么当然 typeof null 就等于 Object 了。</p> <h2 id="学习资料"><a href="#学习资料" aria-hidden="true" class="header-anchor">#</a> 学习资料</h2> <p><a href="https://zui.su/typeof_null/" target="_blank" rel="noopener noreferrer">为什么&quot;typeof null&quot;是'object'<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://2ality.com/2013/10/typeof-null.html" target="_blank" rel="noopener noreferrer">The history of “typeof null”<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" target="_blank" rel="noopener noreferrer">MDN - typeof<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/HZFE/hzfe-questions-and-answers/edit/master/docs/hzfe-qa-2017/C-javascript/types/why-null-is-an-object.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">8/1/2018, 9:53:15 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/hzfe-questions-and-answers/assets/js/25.7d76789b.js" defer></script><script src="/hzfe-questions-and-answers/assets/js/app.eb41323a.js" defer></script>
  </body>
</html>
